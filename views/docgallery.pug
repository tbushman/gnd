- var marked = marked

div.grid-right
	if (infowindow === 'edit')
		include docedit.pug
	else
		if (index >= 0)
			div.grid-container.inner
				div.grid-header
					if (drawtype)
						each entry, i in contentData[drawtype]
							each imag, j in entry
								if (imag.unlocked)
									a.thumbnail.gallery(href="")
										img(src=""+imag.image+"", alt=""+imag.name+"")
					if (contentData.info !== undefined)
						p.tb-font-s.hideoverlap.translate About 
							span.translate #{contentData.info[contentData.level].name}
				div.grid-left(style="padding: 6px 0 0 6px;")
					//if (loggedin && loggedin === menuData.publishers[0].username && menuData.content.length > 0)
					if (drawtype)
						if (contentData[drawtype][contentData.level].unlocked)

							a.tb-font-m(href="/api/editcontent/"+menuData.urltitle+"/"+pageindex+"/"+index+"", title="edit sandwich")
								img(src="/images/"+drawtype+"/"+drawtype+"_"+contentData.level+".svg", alt=""+entry.pagetitle+"'s "+ranks[contentData.level]+" challenge")
						else
							a.tb-font-m(href="#", onclick="$.post('/api/selectlayer/"+menuData.urltitle+"/"+menuData.pageindex+"/"+index+"/"+drawtype+"/"+level+"', function(){ window.location.href = '/api/selectlayer';})")
								.ui
									img(src="/images/icons/unknown.svg", alt=""+contentData[drawtype][contentData.level].name+" is not yet available.")
							span.tb-font-l #{contentData[drawtype][contentData.level].name}

				div.grid-right
					p.tb-font-xl.translate #{contentData.title}
					p.tb-font-s.translate #{contentData.description}
					
				div.grid-footer
					
		else
			each entry, k in menuData.content
				p test all
				a.tb-font-m(href="/"+menuData.pagetitle+"", title="Go to "+menuData.pagetitle+"") #{menuData.pagetitle}
				if (loggedin && loggedin === menuData.publishers[0].username)
					div(style="padding: 10px 0 0 10px")
						a.tb-font-m(style="margin: 6px 0 0 6px;z-index: 0;", href="/api/editcontent/"+menuData.urltitle+"/"+menuData.pageindex+"/"+index+"", title="Edit "+menuData.pagetitle+"")
							img(src="/images/tools/tools_"+entry.level+".svg")
				br
				p.tb-font-s.hideoverlap About
					span #{entry.info[entry.level].name}
				if (entry.description)
					p.tb-font-xs.hideoverlap #{entry.description}
					span &nbsp ...
				if (entry[drawtype].length > 0)
					div.thumbnail.gallery(id= entry.pageindex)
						img(src= entry[drawtype][level].image)
					div#hide
						if (entry[drawtype][level].name === '')
							span.tb-font-xxs &nbsp
						else
							span.tb-font-xxs #{entry[drawtype][entry.level].name}
						if (entry[drawtype][level].caption === '')
							span.tb-font-xs &nbsp
						else
							span.tb-font-xs #{entry[drawtype][entry.level].caption}

				hr(style="color: "+doc.css.primary+"")
		
div.grid-footer
